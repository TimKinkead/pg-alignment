angular.module("app").run(["$templateCache",function(a){a.put("modules/main/admin/view.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px; margin-bottom: 40px"><h2 class="text-center" style="color: whitesmoke">Admin Dashboard</h2></div><div ng-if="status.successMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in status.successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="status.errorMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in status.errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div class="container text-center"><button ng-click="initIndicators()" class="btn btn-info">Init Indicators</button> <button ng-click="initModulesFromModules()" class="btn btn-info">Init Modules from modules.csv</button> <button ng-click="initMinitasks()" class="btn btn-info">Add minitasks to modules</button> <button ng-click="downloadDatasets()" class="btn btn-info">Download Datasets</button></div>'),a.put("modules/main/consensus-scores/modal/view.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title" style="margin: 20px 15px 5px 15px">Consensus Score Comparison<div class="badge">{{scoresheets[0].essay.id}}</div><a href="{{\'https://docs.google.com/viewerng/viewer?url=\'+scoresheets[0].essay.link}}" target="_blank"><i class="glyphicon glyphicon-new-window" style="font-size: 60%"></i></a></h3></div><div class="modal-body"><table class="table"><thead><th ng-repeat="field in fields" class="text-center">{{field|capitalize}}</th></thead><tbody><tr ng-repeat="sheet in scoresheets"><td ng-repeat="field in fields" class="text-center"><div ng-if="[\'grader\', \'rubric\'].indexOf(field) < 0">{{sheet.score[field]}}</div><div ng-if="field === \'grader\'">{{sheet.user.name}}</div><div ng-if="field === \'rubric\'">{{sheet.rubric.name}}</div></td></tr></tbody></table></div>'),a.put("modules/main/consensus-scores/view.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px"><h2 class="text-center" style="color: whitesmoke">Consensus Scores</h2></div><div ng-if="successMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="errorMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="scoresheets.length" class="container"><table class="table table-bordered table-hover"><thead><th ng-repeat="field in fields">{{field|capitalize}}</th></thead><tbody><tr ng-repeat="sheet in scoresheets | orderBy:[\'essay.id\', \'user.name\']" ng-init="sheetIndex = $index+1" style="cursor: pointer" ng-style="{\'border-top\': (!scoresheets[sheetIndex-2] || scoresheets[sheetIndex-2].essay.id !== sheet.essay.id) ? \'solid\' : \'\'}" uib-tooltip="click for details" tooltip-placement="right"><td ng-repeat="field in fields" ng-click="!(field === \'edit\' && sheet.user._id === user._id) && viewDetails(sheet.essay.id)"><div ng-if="[\'no\', \'essay\', \'grader\', \'date\', \'rubric\', \'score\', \'edit\'].indexOf(field) < 0">{{sheet[field]}}</div><div ng-if="field === \'no\'">{{sheetIndex}}</div><div ng-if="field === \'essay\'">{{sheet.essay.id}}</div><div ng-if="field === \'grader\'">{{sheet.user.name}}</div><div ng-if="field === \'date\'">{{sheet.created|date:\'short\'}}</div><div ng-if="field === \'rubric\'">{{sheet.rubric.name}}</div><div ng-if="field === \'score\'">{{sheet.score|averageScore}}</div><div ng-if="field === \'edit\'"><button ng-if="sheet.user._id === user._id" class="btn btn-xs" ui-sref="grade({scoresheet: sheet._id})"><i class="glyphicon glyphicon-pencil"></i> &nbsp; edit</button></div></td></tr></tbody></table></div>'),a.put("modules/main/download/view.html",'<h1 class="text-center" style="color: white; margin-top: 35px">Download</h1><div ng-if="status.successMessage" class="container" style="max-width: 600px; margin-top: 10px"><div class="alert alert-success" style="margin: 0 0 20px 0"><span ng-click="closeSuccessMessage()" class="close">&times</span> {{status.successMessage}}</div></div><div ng-if="status.errorMessage" class="container" style="max-width: 600px"><div class="alert alert-danger" style="margin: 0 0 20px 0"><span ng-click="closeErrorMessage()" class="close">&times</span> {{status.errorMessage}}</div></div><div style="display: flex; flex-direction: column"><div style="flex: 1; display: flex; flex-direction: row; align-items: center"><div style="flex: 1; height: 100%; color: white"><h1 style="text-align: center; margin: 20px">Indicator Category Datasets</h1></div><div style="flex: 1; display: flex; flex-direction: column; align-items: center; border-left: solid; border-color: white"><div style="flex: 1"><button ng-click="downloadIndicatorCategoryDatasets()" class="btn btn-block btn-success" style="min-width: 300px; margin-bottom: 5px"><i class="glyphicon glyphicon-download"></i>&nbsp; Download</button></div></div></div></div>'),a.put("modules/main/essays/modal-check/view.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title" style="margin: 20px 15px 5px 15px">{{user.admin || user.facilitator ? \'Master Score Review\' : \'Master Score Comparison\'}}<div class="badge">{{essay.id}}</div><a href="{{\'https://docs.google.com/viewerng/viewer?url=\'+essay.link}}" target="_blank"><i class="glyphicon glyphicon-new-window" style="font-size: 60%"></i></a></h3></div><div class="modal-body"><div ng-if="status.noMasterScore" class="alert alert-danger text-center">This essay should have a master score, but it does not. Please notify your facilitator.</div><table class="table table-bordered" style="background-color: whitesmoke; margin-bottom: 0"><thead><th ng-repeat="field in fields" class="text-center" style="vertical-align: middle" ng-style="{width: (([\'grader\'].indexOf(field) > -1) ? \'20%\' : \'\')}">{{field|capitalize}}</th></thead><tbody><tr ng-repeat="sheet in scoresheets | orderBy: \'masterScore\'"><td ng-repeat="field in fields" class="text-center" style="vertical-align: middle"><div ng-if="[\'grader\', \'rubric\', \'avg score\'].indexOf(field) < 0">{{sheet.score[field]}}</div><div ng-if="field === \'grader\'">{{sheet.masterScore ? \'Master Score\' : sheet.user.name}}</div><div ng-if="field === \'rubric\'">{{sheet.rubric.name}}</div><div ng-if="field === \'avg score\'"><strong>{{sheet.score|averageScore}}</strong></div></td></tr></tbody></table></div>'),a.put("modules/main/essays/modal-detail/view.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title" style="margin: 20px 15px 5px 15px">Essay Details<div class="badge">{{essay.id}}</div><a href="{{\'https://docs.google.com/viewerng/viewer?url=\'+essay.link}}" target="_blank"><i class="glyphicon glyphicon-new-window" style="font-size: 60%"></i></a></h3></div><div class="modal-body"><div ng-if="status.noMasterScore" class="alert alert-danger text-center">This essay should have a master score, but it does not.</div><div style="margin: 10px 20px"><div style="display: flex; flex-direction: row"><div style="flex: 1"><p style="text-align: center; margin-bottom: 5px; text-decoration: underline; font-size: 110%">Being Graded By</p><p ng-repeat="user in essay.graders" style="text-align: center; margin-bottom: 2px">{{user.name}}</p></div><div style="flex: 1"><p style="text-align: center; margin-bottom: 5px; text-decoration: underline; font-size: 110%">Skipped By</p><p ng-repeat="skip in essay.skip" style="text-align: center; margin-bottom: 2px"><span uib-tooltip="{{skip.reason}}" tooltip-placement="right">{{skip.user.name}}</span></p></div><div style="flex: 1"><p style="text-align: center; margin-bottom: 5px; text-decoration: underline; font-size: 110%">Graded By</p><p ng-repeat="scoresheet in essay.scoresheets" style="text-align: center; margin-bottom: 2px">{{scoresheet.user.name}}</p></div></div></div><h3 style="text-align: center; text-decoration: underline">Scores</h3><p ng-if="!essay.scoresheets.length" style="text-align: center">- no scores -</p><table ng-if="essay.scoresheets.length" class="table table-bordered" style="background-color: whitesmoke; margin-bottom: 0"><thead><th ng-repeat="field in fields" class="text-center" style="vertical-align: middle" ng-style="{width: [\'grader\'].indexOf(field) > -1 ? \'20%\' : ([\'avg score\', \'edit\'].indexOf(field) > -1 ? \'10%\' : \'\')}">{{field|capitalize}}</th></thead><tbody><tr ng-repeat="sheet in scoresheets | orderBy: \'masterScore\'" ng-style="{border: (sheet.masterScore) ? \'solid\' : \'\', \'font-weight\': (sheet.masterScore) ? \'bold\' : \'\'}"><td ng-repeat="field in fields" class="text-center" style="vertical-align: middle"><div ng-if="[\'grader\', \'rubric\', \'avg score\'].indexOf(field) < 0">{{sheet.score[field]}}</div><div ng-if="field === \'grader\'">{{sheet.masterScore ? \'Master Score\' : sheet.user.name}}</div><div ng-if="field === \'rubric\'">{{sheet.rubric.name}}</div><div ng-if="field === \'avg score\'"><strong>{{sheet.score|averageScore}}</strong></div><div ng-if="field === \'edit\'"><button ng-if="user.admin" ng-click="adminEditGrade(sheet)" class="btn btn-xs btn-default" uib-tooltip="edit score for {{sheet.user.name}}" tooltip-placement="left">edit score</button></div></td></tr></tbody></table><div ng-if="user.admin" class="text-center"><button ng-click="adminAddGrade(essay)" class="btn btn-default" style="margin-top: 15px" uib-tooltip="submit grade for any grader">+ add grade</button></div></div>'),a.put("modules/main/essays/view.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px"><h2 class="text-center" style="color: whitesmoke">Essays{{(!user.admin) ? \' (\'+user.group.name+\')\' : \'\'}}</h2></div><div ng-if="!status.allEssaysGraded && user.group" class="container text-center" style="margin-bottom: 20px"><button ui-sref="grade" class="btn btn-lg btn-success">{{!user.scoresheets ? \'Start Grading\' : (status.resumeGrading ? \'Resume Grading\' : \'Grade Next Essay\')}}</button></div><div ng-if="status.allEssaysGraded" class="container"><div class="alert alert-success text-center">All essays have been graded. Thanks for your help!</div></div><div ng-if="successMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="errorMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="user.admin || user.facilitator" class="container"><div class="form-inline well text-center"><div class="form-group"><label>Show&nbsp;</label><select ng-model="status.essayFilterBy" class="form-control" name="group" required><option ng-repeat="option in essayFilterOptions" value="{{option}}">{{option}}</option></select></div><div ng-if="modules && modules.length > 1" class="form-group"><label>&nbsp;for&nbsp;</label><select ng-model="status.moduleFilterBy" class="form-control" name="group" required><option value="" selected="selected">all modules</option><option ng-repeat="module in modules" value="{{module._id}}">the "{{module.name}}" module</option></select></div></div></div><div ng-if="user.admin" class="container text-center"><p>There are <strong>{{essays.length}}</strong> total essays.</p></div><div ng-if="status.processingEssays" class="spinner"></div><div ng-if="!status.processingEssays && essays.length && (user.admin || user.facilitator || (user.scoresheets || status.essayFilterBy === \'all essays\'))" class="container"><table class="table table-bordered table-hover"><thead><th ng-repeat="field in fields" style="text-align: center; vertical-align: middle">{{field|capitalize}}</th></thead><tbody><tr ng-repeat="essay in essays | filter : {visible: true} | orderBy : \'id\'" ng-init="essayIndex = $index+1"><td ng-repeat="field in fields" style="text-align: center; vertical-align: middle"><div ng-if="field === \'no\'">{{essayIndex}}</div><div ng-if="field === \'id\'"><a href="https://docs.google.com/viewerng/viewer?url={{essay.link}}" target="_blank">{{essay.id}}</a> &nbsp; <a href="{{essay.link}}" target="_blank"><i class="glyphicon glyphicon-download"></i></a></div><div ng-if="field === \'module\'">{{essay.module.name}}</div><div ng-if="field === \'in progress\'"><i ng-if="essay.beingGradedByYou" class="glyphicon glyphicon-ok" uib-tooltip="in progress"></i></div><div ng-if="field === \'skipped\'"><i ng-if="essay.skippedByYou" class="glyphicon glyphicon-ok" uib-tooltip="skipped"></i></div><div ng-if="field === \'graded\'"><i ng-if="essay.wasGradedByYou" class="glyphicon glyphicon-ok" uib-tooltip="graded"></i></div><div ng-if="field === \'being graded by\'"><span uib-tooltip="being graded by {{essay.beingGradedBy}}">{{essay.beingGradedBy ? essay.beingGradedBy : \'\'}}</span></div><div ng-if="field === \'skipped by\'"><span uib-tooltip="skipped by {{essay.skippedBy}}">{{essay.skippedBy ? essay.skippedBy : \'\'}}</span></div><div ng-if="field === \'graded by\'"><span uib-tooltip="graded by {{essay.wasGradedBy}}">{{essay.wasGradedBy ? essay.wasGradedBy : \'\'}}</span></div><div ng-if="field === \'everyone\'"><i ng-if="essay.gradeAll" class="glyphicon glyphicon-ok" uib-tooltip="everyone should grade this essay"></i></div><div ng-if="field === \'master score\'"><div ng-if="user.admin || user.facilitator"><div ng-if="essay.masterScore && !essay.masterScoreSheet"><button ui-sref="grade({essay: essay._id, masterScore: true})" class="btn btn-xs btn-danger" uib-tooltip="please add a master score for this check essay"><i class="glyphicon glyphicon-warning-sign"></i> &nbsp;add master score</button></div><div ng-if="essay.masterScoreSheet">{{essay.masterScoreSheet.score|averageScore}} <button ui-sref="grade({scoresheet: essay.masterScoreSheet._id, masterScore: true})" class="btn btn-xs btn-info">edit master score</button></div><div ng-if="user.admin && !essay.masterScore"><span ui-sref="grade({essay: essay._id, masterScore: true})" uib-tooltip="add master score" style="cursor: pointer; color: lightgray">+</span></div></div><div ng-if="!user.admin && !user.facilitator"><div ng-if="essay.masterScore && essay.wasGradedByYou"><span ng-if="essay.masterScoreSheet">{{essay.masterScoreSheet.score|averageScore}} &nbsp;</span> <span ng-if="!essay.masterScoreSheet"><i class="glyphicon glyphicon-warning-sign" uib-tooltip="This essay should have a master score, but it does not."></i> &nbsp;</span> <button ng-click="checkMasterScore(essay._id)" class="btn btn-xs btn-info">compare</button></div></div></div><div ng-if="field === \'grade\'"><div ng-if="(!user.admin && !user.facilitator) || (user.facilitator && !essay.masterScore)"><span ng-if="essay.yourScoreSheet">{{essay.yourScoreSheet.score|averageScore}} &nbsp;</span> <button ui-sref="grade({essay: essay._id, scoresheet: essay.yourScoreSheet._id})" class="btn btn-sm btn-default" ng-class="gradeButtonNgClass(essay)">{{gradeButtonText(essay)}}</button></div></div><div ng-if="field === \'details\'"><button ng-click="viewDetails(essay._id)" class="btn btn-sm btn-default">view details</button></div></td></tr></tbody></table></div><div ng-if="!user.admin && !user.facilitator && !status.processingEssays" class="text-center" style="margin-bottom: 20px"><button ng-if="status.essayFilterBy !== \'all essays\'" ng-click="status.essayFilterBy = \'all essays\'" class="btn btn-sm btn-default">Show All Essays</button> <button ng-if="status.essayFilterBy === \'all essays\'" ng-click="status.essayFilterBy = \'my essays\'" class="btn btn-sm btn-default">Hide Ungraded Essays</button></div>'),a.put("modules/main/grade/modal/check.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">Scores Saved!</h3></div><div class="modal-body"><div style="margin-bottom: 10px"><p style="text-align: center; margin: 20px 0 10px 0; font-size: 120%"><strong><em>The essay you just scored has a master score.</em></strong></p><p style="text-align: center; margin: 20px 0 10px 0; font-size: 120%">Want to compare your scores?</p><button ng-click="reviewMasterScores()" class="btn btn-lg btn-block btn-info" style="max-width: 50%; margin: auto">Compare Master Scores</button></div><p style="text-align: center; margin: 25px 0 0 0">- or -</p><div style="margin-bottom: 10px"><p style="text-align: center; margin: 20px 0 10px 0; font-size: 120%">Ready to grade another essay?</p><button ng-click="nextEssay()" class="btn btn-lg btn-block btn-success" style="max-width: 50%; margin: auto">Grade Another Essay</button></div></div>'),a.put("modules/main/grade/modal/consensus.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">Scores Saved!</h3></div><div class="modal-body"><div style="margin-bottom: 10px"><p style="text-align: center; margin: 20px 0 10px 0; font-size: 120%"><strong><em>Someone else has also scored this essay.</em></strong><br>Want to review your consensus scores?</p><button ng-click="reviewConsensusScores()" class="btn btn-lg btn-block btn-info" style="max-width: 50%; margin: auto">Review Consensus Scores</button></div><p style="text-align: center; margin: 25px 0 0 0">- or -</p><div style="margin-bottom: 10px"><p style="text-align: center; margin: 20px 0 10px 0; font-size: 120%">Ready to grade another essay?</p><button ng-click="nextEssay()" class="btn btn-lg btn-block btn-success" style="max-width: 50%; margin: auto">Grade Another Essay</button></div></div>'),a.put("modules/main/grade/modal/done.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">All Done!</h3></div><div class="modal-body"><div style="margin-bottom: 10px"><div class="alert alert-success text-center" style="margin-bottom: 0">All essays have been graded. Thanks for your help!</div></div></div>'),a.put("modules/main/grade/modal/error.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">{{header}}</h3></div><div class="modal-body"><div class="alert alert-danger text-center" style="margin-bottom: 0">{{message}}</div></div>'),a.put("modules/main/grade/modal/invalid.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">Warning!</h3></div><div class="modal-body"><div class="alert alert-danger text-center" style="margin-bottom: 0"><i class="glyphicon glyphicon-hand-right" style="color: red"></i>&nbsp; Please score all rubric elements before saving.</div></div>'),a.put("modules/main/grade/modal/next.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">Scores Saved!</h3></div><div class="modal-body"><div style="margin-bottom: 10px"><p style="text-align: center; margin: 20px 0 10px 0; font-size: 120%">Ready for the next one?</p><button ng-click="nextEssay()" class="btn btn-lg btn-block btn-success" style="max-width: 50%; margin: auto">Grade Another Essay</button></div><div style="margin-bottom: 10px"><p style="text-align: center; margin: 20px 0 10px 0; font-size: 120%">- or -</p><button ng-click="backToEssays()" class="btn btn-lg btn-block btn-default" style="max-width: 50%; margin: auto"><i class="glyphicon glyphicon-arrow-left" style="font-size: 100%"></i> &nbsp;Back to Essays</button></div></div>'),a.put("modules/main/grade/modal/skip.html",'<form ng-submit="clickSkip() && form.$valid && skip()" id="form" name="form" novalidate><div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">Skip Essay</h3></div><div class="modal-body"><div class="form-group"><label>Reason</label><input ng-model="params.reason" class="form-control" placeholder="why are you skipping this essay?" required></div><div class="alert alert-info text-center" style="margin-bottom: 5px"><em>Note:</em> You can get back to skipped essays on the <span class="btn btn-sm btn-default" style="margin: 0 5px"><i class="glyphicon glyphicon-file"></i> Essays</span> page.</div></div><div class="modal-footer"><button type="submit" class="btn btn-block btn-success" style="max-width: 50%; margin: auto">Skip Essay</button><p ng-if="status.clicked && !form.$valid" style="color: red; text-align: center; margin-top: 10px">* please provide a reason *</p></div></form>'),a.put("modules/main/grade/view.html",'<div ng-init="initializeGradeDashboard()" class="text-center" style="height: 65px; padding: 15px; border-top: thin solid; border-bottom: thin solid; background-color: lightblue"><button ui-sref="essays({essayFilterBy: (params.masterScore) ? \'master scores\' : \'\'})" class="btn btn-default pull-left"><i class="glyphicon glyphicon-arrow-left"></i> &nbsp;back to essays</button> <button ng-click="switchSides()" class="btn btn-default text-center"><i class="glyphicon glyphicon-share-alt" style="transform: rotate(90deg) scaleY(-1)"></i> Switch <i class="glyphicon glyphicon-share-alt" style="transform: rotate(90deg)"></i></button> <button ng-click="clickSave() && save()" class="btn btn-success pull-right" style="margin-left: 5px">save</button> <button ng-if="!params.scoresheet" ng-click="skip()" class="btn btn-default pull-right">skip</button></div><div ng-if="params.masterScore" class="text-center" style="height: 55px; position: fixed; top: 65px; left: 0; right: 0; bottom: 120px; padding: 15px; border-bottom: thin solid; background-color: yellow"><div ng-if="!params.scoresheet"><p style="font-weight: bold; font-size: 115%">You are adding a master score.</p></div><div ng-if="params.scoresheet"><p ng-if="docs.scoresheet.user._id.toString() === user._id.toString()" style="font-weight: bold; font-size: 115%">You are editing a master score.</p><p ng-if="docs.scoresheet.user._id.toString() !== user._id.toString()" style="font-weight: bold; font-size: 115%">Warning! You are editing a master score that was added by <span style="text-decoration: underline">{{docs.scoresheet.user.name}}</span>.</p></div></div><div ng-if="!params.masterScore && user.admin" class="text-center" style="height: 55px; position: fixed; top: 65px; left: 0; right: 0; bottom: 120px; padding: 10px; border-bottom: thin solid; background-color: yellow"><div ng-if="!params.scoresheet"><div class="form-inline"><div class="form-group"><label>Grade this essay for&nbsp;</label><select ng-model="params.user" class="form-control"><option ng-repeat="grader in docs.graders" value="{{grader._id}}" class="form-control">{{grader.name}}</option></select></div></div></div><div ng-if="params.scoresheet"><p ng-if="docs.scoresheet.user._id.toString() === user._id.toString()" style="font-weight: bold; font-size: 115%; margin: 5px 0 10px 0">You are editing your own score as an admin.</p><p ng-if="docs.scoresheet.user._id.toString() !== user._id.toString()" style="font-weight: bold; font-size: 115%; margin: 5px 0 10px 0">Warning! You are editing a score that was added by <span style="text-decoration: underline">{{docs.scoresheet.user.name}}</span>.</p></div></div><div id="grade-dashboard" style="display: flex; position: fixed; left: 0; right: 0; bottom: 0" ng-style="{top: (params.masterScore || user.admin) ? \'120px\' : \'65px\'}"><div resizable r-directions="[\'right\']" r-flex="true" class="resizable" r-grabber="<div style=\'height: 100%; width: 100%; border-left: thin solid; border-right: thin solid; background-color: lightblue;\'></div>" style="width: 50%; max-width: 80%; min-width: 200px; background-color: lightgray"><ng-include src="user.rubricSide === \'right\' ? \'modules/main/grade/views/text.html\' : \'modules/main/grade/views/rubric.html\'"></ng-include></div><div style="flex: 1; margin-left: 14px; overflow-y: auto"><ng-include src="user.rubricSide === \'right\' ? \'modules/main/grade/views/rubric.html\' : \'modules/main/grade/views/text.html\'"></ng-include></div></div>'),a.put("modules/main/grade/views/rubric.html",'<div style="height: 100%; width: 100%; overflow-y: auto; padding: 15px; background-color: gainsboro"><div ng-if="status.newModule" class="alert alert-success text-center">heads up &nbsp; <i class="glyphicon glyphicon-hand-down"></i> &nbsp; new module</div><h3 style="text-align: center; margin-top: 10px">Rubric</h3><div ng-if="!status.processingRubrics && docs.rubrics.$resolved" class="form-group"><div class="well"><p ng-if="docs.rubric" style="margin: 0; text-align: center; font-size: 110%">{{docs.rubric.name}} <a href="{{\'https://docs.google.com/viewerng/viewer?url=\'+docs.rubric.link}}" target="_blank"><i class="glyphicon glyphicon-new-window" style="font-size: 90%"></i></a></p><div ng-if="!docs.rubric"><select ng-model="params.rubric" class="form-control" style="margin: auto" name="rubric" required><option value="" selected="selected" hidden disabled="disabled">please select a rubric</option><option ng-repeat="rubric in docs.rubrics | orderBy:name" value="{{rubric._id}}">{{rubric.name}}</option></select></div></div></div><span ng-if="status.processingRubrics" class="spinner-sm" style="margin: auto"></span><h3 ng-if="params.rubric" style="text-align: center; margin-top: 10px">Scoring Elements</h3><span ng-if="status.processingRubric" class="spinner-sm" style="margin: auto"></span><div ng-if="docs.rubric"><div ng-init="updateRubricTableWidth()" class="text-center" style="margin-bottom: 5px"><div class="btn-group"><button ng-click="switchRubricElements(\'show all\')" class="btn btn-xs btn-default" ng-class="{\'active\': user.rubricElements === \'show all\'}">show all</button> <button ng-click="switchRubricElements(\'one at a time\')" class="btn btn-xs btn-default" ng-class="{\'active\': user.rubricElements === \'one at a time\'}">one at a time</button></div></div><hr style="margin: 10px 0 5px"><div ng-if="status.clickSave && !status.formValid && user.rubricElements === \'show all\'" class="alert alert-danger text-center" style="margin-bottom: 5px"><i ng-if="status.clickSave && !params.score[field.name]" class="glyphicon glyphicon-hand-right" style="color: red"></i>&nbsp; Warning! Please score all elements before saving.</div><div ng-if="status.formValid && !status.saved && user.rubricElements === \'show all\'" class="alert alert-success text-center" style="margin-bottom: 5px">All elements scored! Please click save.</div><div id="rubric-table" style="display: flex; flex-direction: column"><div ng-repeat="field in docs.rubric.fields" ng-init="fieldIndex = $index" style="flex: 1; margin: 2px 0; padding: 5px" ng-style="{\'background-color\': (docs.rubric.fields[fieldIndex].visible) ? \'lightblue\' : \'\'}"><div ng-if="docs.rubric.fields[fieldIndex].visible" style="padding: 5px 0"><i ng-if="params.score[field.name]" class="glyphicon glyphicon-ok" style="color: green"></i> <i ng-if="status.clickSave && !params.score[field.name]" class="glyphicon glyphicon-hand-right" style="color: red"></i>&nbsp; <span style="font-style: italic; font-weight: bold">{{field.name|capitalize}}</span><p ng-if="field.note" style="margin: 5px 10px 5px 20px; font-style: italic; padding: 5px 10px; border: solid thin">{{field.note}}</p></div><div ng-if="!docs.rubric.fields[fieldIndex].visible"><i ng-if="params.score[field.name]" class="glyphicon glyphicon-ok" style="color: green"></i> <i ng-if="status.clickSave && !params.score[field.name]" class="glyphicon glyphicon-hand-right" style="color: red"></i>&nbsp; <span>{{field.name|capitalize}}</span> <span ng-if="params.score[field.name]" style="font-weight: bold">:&nbsp;&nbsp;{{params.score[field.name]}}</span> <button ng-if="params.score[field.name]" type="button" ng-click="editField(fieldIndex)" class="btn btn-xs btn-default" style="margin-left: 15px"><span style="margin: 0 2px"><i class="glyphicon glyphicon-pencil"></i> edit</span></button></div><div ng-if="docs.rubric.fields[fieldIndex].visible" class="btn-group-custom" style="display: flex" ng-style="{\'flex-direction\': (status.rubricTableWidth > 700) ? \'row\' : \'column\'}"><button ng-repeat="detail in field.details | orderBy: \'score\'" ng-click="scoreField(fieldIndex, field.name, detail.score)" class="btn" ng-class="{active: params.score[field.name] === detail.score}" style="white-space: normal; min-height: 60px" ng-style="{flex: (detail.hasOwnProperty(\'text\')) ? 5 : 1, \'text-align\': (detail.hasOwnProperty(\'text\')) ? \'left\' : \'center\', \'font-size\': (detail.hasOwnProperty(\'text\')) ? \'100%\' : \'80%\'}" type="button" uib-tooltip="{{detail.score}}"><div ng-style="{margin: (detail.text) ? \'auto\' : \'-10px\'}"><div ng-if="detail.texts"><p ng-repeat="text in detail.texts" style="margin: 10px 0">{{text}}</p></div><div ng-if="!detail.texts">{{detail.text || detail.score}}</div></div></button></div></div></div><div style="min-height: 200px; margin-top: 10px"><div ng-if="status.clickSave && !status.formValid" class="alert alert-danger text-center"><i ng-if="status.clickSave && !params.score[field.name]" class="glyphicon glyphicon-hand-right" style="color: red"></i>&nbsp; Warning! Please score all elements before saving.</div><div ng-if="status.formValid && !status.saved" class="alert alert-success text-center">All elements scored! Please click save.</div></div></div></div>'),a.put("modules/main/grade/views/text.html",'<div style="height: 100%; width: 100%; overflow-y: auto; background-color: lightgray"><div style="display: flex; flex-direction: column"><div ng-if="!status.hidePrompt" style="margin: 15px 15px 0 15px"><div ng-if="status.newModule" class="alert alert-success text-center">heads up &nbsp; <i class="glyphicon glyphicon-hand-down"></i> &nbsp; new module</div><h3 style="text-align: center">Prompt <span ng-if="!status.hidePrompt" class="badge">{{docs.essay.module.name}}</span></h3><div ng-if="!status.processingEssay" class="well" style="margin-bottom: 0"><p style="margin-bottom: 0">{{docs.essay.module.prompt}}</p><div ng-if="docs.essay.module.promptExtra.length"><ul style="margin-top: 10px; margin-bottom: 0"><li ng-repeat="bullet in docs.essay.module.promptExtra">{{bullet}}</li></ul></div></div><button ng-click="switchPrompt()" class="btn btn-xs btn-default pull-right" style="margin: -10px 10px 0 0">hide prompt</button><div ng-if="status.processingEssay" class="spinner-sm" style="margin: auto"></div></div><div ng-if="status.hidePrompt" class="text-center"><button ng-click="switchPrompt()" class="btn btn-xs btn-default" style="margin: 10px 0 5px 0">show prompt</button></div><h3 ng-if="!status.hidePrompt" style="text-align: center; margin: 20px 15px 5px 15px">Text <span class="badge">{{docs.essay.id}}</span> <a href="{{docs.essay.link}}" target="_blank"><i class="glyphicon glyphicon-download" style="font-size: 60%"></i></a></h3><div ng-if="status.processingEssay" class="spinner-sm" style="margin: auto; margin-top: 5px; z-index: 0"></div><iframe ng-if="!status.processingEssay && docs.essay.iframeLink" ng-init="updateIframeHeightDelay(1000)" id="iframe-text" ng-src="{{docs.essay.iframeLink}}" frameborder="0" scrolling="no" height="100%" width="100%" style="flex: 1; z-index: 1; min-height: 600px"></iframe></div></div>'),
a.put("modules/main/graded-work/create/view.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">New Score Sheet</h3></div><div class="modal-body"><div ng-if="status.errorMessage" class="col-sm-12 alert alert-danger"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{status.errorMessage}}</div><form class="form-horizontal" style="margin-top: 15px" name="form" novalidate><div ng-if="!user.admin" class="form-group"><label class="col-sm-3 control-label">Grader:</label><div class="col-sm-4"><input type="text" name="grader" value="{{user.name}}" class="form-control" required disabled="disabled"></div></div><div ng-if="user.admin" class="form-group"><label class="col-sm-3 control-label">Graders:</label><div class="col-sm-4"><select ng-model="params.grader" class="form-control" name="grader" required><option ng-repeat="grader in graders | orderBy:name">{{grader.name}}</option></select></div><div ng-if="!params.grader" class="col-sm-4" style="height: 34px; padding-top: 8px"><span style="color: blue"><i class="glyphicon glyphicon-hand-left"></i> &nbsp;select a grader</span></div></div><div ng-if="params.grader" class="form-group"><label class="col-sm-3 control-label">Student Work Id:</label><div class="col-sm-4"><input ng-model="params.studentWorkId" class="form-control" name="studentWorkId" placeholder="student work document id" required></div><div ng-if="!params.studentWorkId || !status.getRubric" class="col-sm-4" style="height: 34px; padding-top: 8px"><span ng-style="{color: (!params.studentWorkId) ? \'blue\' : \'gray\'}"><i class="glyphicon glyphicon-hand-left"></i> &nbsp;enter your document id</span></div></div><div ng-if="params.grader && !status.getRubric" class="form-group"><div class="col-sm-3"></div><div class="col-sm-4"><button ng-if="!rubric" ng-click="getRubric()" class="btn btn-block btn-default" ng-class="{\'btn-success\': !form.studentWorkId.$pristine}">Get Rubric</button></div><div ng-if="params.studentWorkId && !params.getRubric" class="col-sm-4" style="height: 34px; padding-top: 8px"><span style="color: blue"><i class="glyphicon glyphicon-hand-left"></i> &nbsp;click this button</span></div></div><div ng-if="status.getRubric" class="form-group"><label class="col-sm-3 control-label">Rubric:</label><div class="col-sm-4"><select ng-model="params.rubric" class="form-control" name="rubric" required><option ng-repeat="rubric in rubrics | orderBy:name" value="{{rubric._id}}">{{rubric.name}}</option></select></div><div ng-if="!rubric" class="col-sm-4" style="height: 34px; padding-top: 8px"><span style="color: blue"><i class="glyphicon glyphicon-hand-left"></i> &nbsp;select a rubric</span></div><div ng-if="rubric" class="col-sm-4" style="height: 34px; padding-top: 8px"><span style="color: blue"><i class="glyphicon glyphicon-hand-down"></i> &nbsp;score each field below</span></div></div><div ng-if="rubric"><table class="table"><thead><th><strong>Scoring Elements</strong></th></thead><tbody><tr ng-repeat="field in rubric.fields" ng-init="fieldIndex = $index" ng-style="{\'background-color\': (rubric.fields[fieldIndex].visible) ? \'lightblue\' : \'\'}"><td style="width: 15%; vertical-align: middle" ng-style="{\'font-style\': (rubric.fields[fieldIndex].visible) ? \'italic\' : \'normal\', \'font-weight\': (rubric.fields[fieldIndex].visible) ? \'bold\' : \'normal\'}">{{field.name|capitalize}}</td><td style="vertical-align: middle"><div ng-if="params.score[field.name] && !rubric.fields[fieldIndex].visible">{{params.score[field.name]}} <button type="button" ng-click="editField(fieldIndex)" class="btn btn-xs btn-default" style="margin-left: 15px"><span style="margin: 0 2px"><i class="glyphicon glyphicon-pencil"></i> edit</span></button></div><div ng-if="rubric.fields[fieldIndex].visible" class="btn-group-custom" style="width: 100%; height: 100%"><button ng-repeat="detail in field.details" ng-click="scoreField(fieldIndex, field.name, detail.score)" class="btn" ng-class="{active: params.score[field.name] === detail.score}" style="white-space: normal; height: 100%" ng-style="{width: (detail.text) ? \'21%\' : \'5%\', \'font-size\': (detail.text) ? \'100%\' : \'80%\'}" type="button" uib-tooltip="{{(detail.text) ? detail.score : \'\'}}"><span ng-style="{margin: (detail.text) ? \'auto\' : \'-10px\'}">{{detail.text || detail.score}}</span></button></div></td></tr></tbody></table></div></form><hr><button ng-if="rubric" ng-click="click() && save()" class="btn btn-block btn-default" ng-class="{\'btn-success\': status.formValid}" style="max-width: 25%; margin: auto" type="submit">Save</button><p ng-if="status.clicked && !status.formValid" class="help-block text-center" style="color: red">* please score all fields before saving *</p></div>'),a.put("modules/main/graded-work/edit/view.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">Edit Score Sheet</h3></div><div class="modal-body"><div ng-if="status.errorMessage" class="col-sm-12 alert alert-danger"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{status.errorMessage}}</div><form class="form-horizontal" style="margin-top: 15px" name="form" novalidate><div ng-if="!user.admin" class="form-group"><label class="col-sm-3 control-label">Grader:</label><div class="col-sm-4"><input type="text" name="grader" value="{{user.name}}" class="form-control" required disabled="disabled"></div></div><div ng-if="user.admin" class="form-group"><label class="col-sm-3 control-label">Graders:</label><div class="col-sm-4"><select ng-model="params.grader" class="form-control" name="grader" required><option ng-repeat="grader in graders | orderBy:name">{{grader.name}}</option></select></div></div><div class="form-group"><label class="col-sm-3 control-label">Student Work Id:</label><div class="col-sm-4"><input ng-model="params.studentWorkId" class="form-control" name="studentWorkId" placeholder="student work document id" required></div></div><div class="form-group"><label class="col-sm-3 control-label">Rubric:</label><div class="col-sm-4"><select class="form-control" name="rubric" required ng-options="rubric.name for rubric in rubrics track by rubric._id" ng-model="params.rubric"></select></div></div><div ng-if="rubric"><table class="table"><thead><th><strong>Scoring Elements</strong></th><th><button ng-if="!status.showAll" ng-click="showAll()" type="button" class="btn btn-xs btn-default">show all</button> <button ng-if="status.showAll" ng-click="hideAll()" type="button" class="btn btn-xs btn-default">hide all</button></th></thead><tbody><tr ng-repeat="field in rubric.fields" ng-init="fieldIndex = $index" ng-style="{\'background-color\': (rubric.fields[fieldIndex].visible) ? \'lightblue\' : \'\'}"><td style="width: 15%; vertical-align: middle" ng-style="{\'font-style\': (rubric.fields[fieldIndex].visible) ? \'italic\' : \'normal\', \'font-weight\': (rubric.fields[fieldIndex].visible) ? \'bold\' : \'normal\'}">{{field.name|capitalize}}</td><td style="vertical-align: middle"><div ng-if="params.score[field.name] && !rubric.fields[fieldIndex].visible">{{params.score[field.name]}} <button type="button" ng-click="editField(fieldIndex)" class="btn btn-xs btn-default" style="margin-left: 15px"><span style="margin: 0 2px"><i class="glyphicon glyphicon-pencil"></i> edit</span></button></div><div ng-if="rubric.fields[fieldIndex].visible" class="btn-group-custom" style="width: 100%; height: 100%"><button ng-repeat="detail in field.details" ng-click="scoreField(fieldIndex, field.name, detail.score)" class="btn" ng-class="{active: params.score[field.name] === detail.score}" style="white-space: normal; height: 100%" ng-style="{width: (detail.text) ? \'21%\' : \'5%\', \'font-size\': (detail.text) ? \'100%\' : \'80%\'}" type="button" uib-tooltip="{{(detail.text) ? detail.score : \'\'}}"><span ng-style="{margin: (detail.text) ? \'auto\' : \'-10px\'}">{{detail.text || detail.score}}</span></button></div></td></tr></tbody></table></div></form><hr><button ng-if="rubric" ng-click="click() && save()" class="btn btn-block btn-default" ng-class="{\'btn-success\': status.formValid}" style="max-width: 25%; margin: auto" type="submit">Save</button><p ng-if="status.clicked && !status.formValid" class="help-block text-center" style="color: red">* please score all fields before saving *</p></div>'),a.put("modules/main/graded-work/preview/view.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">Score Sheet Preview</h3></div><div class="modal-body"><ul><li style="margin-bottom: 5px"><strong>Grader:</strong> {{scoresheet.user.name}}</li><li style="margin-bottom: 5px"><strong>Essay:</strong> <a href="{{\'https://docs.google.com/viewerng/viewer?url=\'+scoresheet.essay.link}}" target="_blank">{{scoresheet.essay.id}}</a></li><li style="margin-bottom: 5px"><strong>Rubric:</strong> {{scoresheet.rubric.name}}</li><li style="margin-bottom: 5px"><strong>Avg Score:</strong> {{scoresheet.score|averageScore}}</li></ul><table class="table"><thead><th ng-repeat="field in fields" class="text-center">{{field|capitalize}}</th></thead><tbody><tr><td ng-repeat="field in fields" class="text-center">{{scoresheet.score[field]}}</td></tr></tbody></table></div>'),a.put("modules/main/graded-work/view.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px"><h2 class="text-center" style="color: whitesmoke">Graded Work</h2></div><div class="container text-center" style="margin-bottom: 15px"><button ui-sref="grade" class="btn btn-success">Start Grading</button></div><div class="container text-center"><p ng-if="!user.admin">You have saved <strong>{{scoresheets.length}}</strong> score sheets.</p><p ng-if="user.admin">There are <strong>{{scoresheets.length}}</strong> total score sheets.</p></div><div ng-if="successMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="errorMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="scoresheets.length" class="container"><table class="table table-bordered table-hover"><thead><th ng-repeat="field in fields">{{field|capitalize}}</th></thead><tbody><tr ng-repeat="sheet in scoresheets | orderBy:\'-created\'" ng-init="sheetIndex = $index+1" ng-click="editOrView(sheet)" style="cursor: pointer" uib-tooltip="{{(sheet.user._id === user._id) ? \'click to edit\' : \'click to view\'}}" tooltip-placement="right"><td ng-repeat="field in fields"><div ng-if="[\'no\', \'date\', \'grader\', \'essay\', \'rubric\', \'score\'].indexOf(field) < 0">{{sheet[field]}}</div><div ng-if="field === \'no\'">{{sheetIndex}}</div><div ng-if="field === \'date\'">{{sheet.created|date:\'short\'}}</div><div ng-if="field === \'grader\'">{{sheet.user.name}}</div><div ng-if="field === \'essay\'">{{sheet.essay.id}}</div><div ng-if="field === \'rubric\'">{{sheet.rubric.name}}</div><div ng-if="field === \'score\'">{{sheet.score|averageScore}}</div></td></tr></tbody></table></div><div ng-if="skippedEssays.$resolved && skippedEssays.length" class="container text-center"><hr><h3 style="color: red">Skipped Essays</h3><table class="table table-bordered table-hover"><thead><th>Grader</th><th>Essay</th><th>Skip Reason</th></thead><tbody ng-repeat="essay in skippedEssays" ui-sref="grade({essay: essay._id})" style="cursor: pointer" uib-tooltip="click to grade" tooltip-placement="right"><tr ng-repeat="skipObj in essay.skip"><td>{{skipObj.user.name}}</td><td>{{essay.id}}</td><td>{{skipObj.reason}}</td></tr></tbody></table></div>'),a.put("modules/main/graders/create/view.html",'<div class="modal-header"><span ng-click="cancel()" class="close" style="margin: -10px -10px; padding: 10px 10px">&times;</span><h3 class="modal-title">New Grader</h3></div><div class="modal-body"><div ng-if="status.errorMessage" class="col-sm-12 alert alert-danger"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{status.errorMessage}}</div><form class="form-horizontal" style="margin-top: 15px" name="form" id="form" ng-submit="click() && form.$valid && save()"><div class="form-group"><label class="col-sm-2 control-label">Name:</label><div class="col-sm-4"><input ng-model="params.firstName" class="form-control" name="firstName" type="text" placeholder="first name" required></div><div class="col-sm-5"><input ng-model="params.lastName" class="form-control" name="lastName" type="text" placeholder="last name" required></div></div><div class="form-group"><label class="col-sm-2 control-label">Email:</label><div class="col-sm-9"><input ng-model="params.email" class="form-control" name="email" type="email" ng-pattern="emailRegex" placeholder="email address" required></div></div><button type="submit" class="hidden"></button></form><hr><button ng-click="click() && form.$valid && save()" class="btn btn-block btn-default" ng-class="{\'btn-success\': (!form.$dirty && !status.clicked) || form.$valid}" style="max-width: 50%; margin: auto" type="button">Save</button><p ng-if="status.clicked && !form.$valid" class="help-block text-center" style="color: red">* first name, last name, and email are required *</p></div>'),a.put("modules/main/graders/view.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px"><h2 class="text-center" style="color: whitesmoke">Graders</h2></div><div class="container text-center"><p ng-if="user.admin">There are <strong>{{graders.length}}</strong> total graders.</p><p ng-if="user.facilitator">There are <strong>{{graders.length}}</strong> graders in your group.</p></div><div ng-if="successMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="errorMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div class="container"><table class="table table-bordered"><thead><th ng-repeat="field in fields" class="text-center" style="vertical-align: middle">{{field|capitalize}}</th></thead><tbody><tr ng-repeat="grader in graders | orderBy:\'-created\'" ng-init="graderIndex = $index+1"><td ng-repeat="field in fields" class="text-center" style="vertical-align: middle"><div ng-if="[\'no\', \'group\', \'graded essays\', \'check scores\', \'facilitator\', \'admin\'].indexOf(field) < 0">{{grader[field]}}</div><div ng-if="field === \'no\'">{{graderIndex}}</div><div ng-if="field === \'group\'"><span ng-if="grader.group" uib-tooltip-html="getGroupTooltip(grader.group)" tooltip-placement="right">{{grader.group.name}}</span></div><div ng-if="field === \'graded essays\'">{{grader.scoresheets}}</div><div ng-if="field === \'check scores\'">{{grader.checkScores}}</div><div ng-if="field === \'facilitator\'"><i ng-if="grader.facilitator" class="glyphicon glyphicon-ok"></i></div><div ng-if="field === \'admin\'"><i ng-if="grader.admin" class="glyphicon glyphicon-ok"></i></div></td></tr></tbody></table></div>'),a.put("modules/main/home/view.html",'<div class="container text-center"><h1 style="color: white; font-size: 5em; margin-top: 100px">AUTOMATED ALIGNMENT</h1><h2 style="color: white; font-size: 2em; font-style: italic"><a href="http://prevagroup.com" target="_blank" style="color: white">A Preva Group Project</a></h2><h3 class="container" style="color: white; font-size: 2em; margin-top: 100px; max-width: 750px; line-height: 150%">An education research project that aims to leverage machine learning to predict alignment to common core for a variety of teaching modules.</h3></div>'),a.put("modules/main/indicators/indicator/view.html",'<h4 class="text-center" style="color: white; margin: 35px 0 0 0">Indicator</h4><div style="display: flex; flex-direction: row; align-items: center; margin: 0 10px 0 10px"><div style="flex: 1"><button ng-if="params.prevIndicator" ng-click="goToIndicator(params.prevIndicator)" class="btn btn-default pull-left"><i class="glyphicon glyphicon-chevron-left"></i> {{params.prevIndicator}}</button></div><div style="flex: 6"><h1 class="text-center" style="color: white; margin: 0">{{params.indicatorId}}</h1></div><div style="flex: 1"><button ng-if="params.nextIndicator" ng-click="goToIndicator(params.nextIndicator)" class="btn btn-default pull-right">{{params.nextIndicator}} <i class="glyphicon glyphicon-chevron-right"></i></button></div></div><div ng-if="successMessages.length" class="container" style="max-width: 650px"><div ng-repeat="message in successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="errorMessages.length" class="container" style="max-width: 650px"><div ng-repeat="message in errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="status.processing" class="spinner"></div><div ng-if="!status.processing" class="container text-center" style="margin-top: 25px; max-width: 600px; color: white"><p style="margin: 0">{{indicator.guidingQuestion}}</p></div><div ng-if="!status.processing" class="container" style="margin-top: 15px; padding: 0; max-width: 600px; background-color: white"><table class="table table-bordered table-hover" style="margin: 0; padding: 0"><thead><th ng-repeat="header in [\'Score\', \'Description\', \'Qty\', \'%\']" class="text-center">{{header}}</th></thead><tbody><tr ng-repeat="score in indicator.scores" uib-tooltip="{{(indicator.manualScores[score.no]||0)+\' manually scored modules were given a \'+score.no+\' for indicator \'+indicator.id+\'.\'}}"><td class="text-center" style="vertical-align: middle">{{score.no}}</td><td>{{score.description}}</td><td class="text-center" style="vertical-align: middle">{{indicator.manualScores[score.no] || 0}}</td><td class="text-center" style="vertical-align: middle">{{indicator.manualScores[score.no]/indicator.manualScores.total||0|percentage}}</td></tr></tbody></table></div><div ng-if="!status.processing" class="container" style="margin-top: 20px; max-width: 500px"><div style="display: flex; flex-direction: row"><button ng-click="openInAzureStudio(indicator)" class="btn btn-info" style="flex: 1; margin-right: 5px">Open Model in Azure Studio</button> <button ng-click="viewApiEndpointDocs(indicator)" class="btn btn-info" style="flex: 1; margin-left: 5px">View Api Endpoint Docs</button></div></div>'),a.put("modules/main/indicators/view.html",'<h1 class="text-center" style="color: white; margin-top: 35px">Indicators</h1><div ng-if="successMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="errorMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="status.processing" class="spinner"></div><div ng-if="!status.processing" class="container text-center" style="margin-top: 20px; margin-bottom: 60px; padding: 0"><div ng-repeat="item in indicators.holisticCategories" ng-init="itemIndex = $index" style="display: flex; flex-direction: row"><div style="display: flex; flex: 1; align-items: center; justify-content: center; background-color: white; margin: 5px" ng-style="{\'margin-top\': (itemIndex === 0 ? 0 : \'5px\'), \'margin-bottom\': (itemIndex === indicators.holisticCategories.length-1 ? 0 : \'5px\')}">{{item.holisticCategory}}</div><div style="flex: 14" ng-style="{\'margin-top\': (itemIndex === 0 ? 0 : \'5px\'), \'margin-bottom\': (itemIndex === indicators.holisticCategories.length-1 ? 0 : \'5px\')}"><div ng-repeat="categ in item.indicatorCategories" ng-init="categIndex = $index" style="display: flex; flex-direction: row"><div style="display: flex; flex: 1; align-items: center; justify-content: center; background-color: white; margin: 5px" ng-style="{\'margin-top\': (categIndex === 0 ? 0 : \'5px\'), \'margin-bottom\': (categIndex === item.indicatorCategories.length-1 ? 0 : \'5px\')}">{{categ.indicatorCategory}}</div><div style="display: flex; flex: 3; align-items: center; justify-content: center; background-color: white; margin: 5px" ng-style="{\'margin-top\': (categIndex === 0 ? 0 : \'5px\'), \'margin-bottom\': (categIndex === item.indicatorCategories.length-1 ? 0 : \'5px\')}"><span>{{categ.guidingQuestion}}</span></div><div style="flex: 10" ng-style="{\'margin-top\': (categIndex === 0 ? 0 : \'5px\'), \'margin-bottom\': (categIndex === item.indicatorCategories.length-1 ? 0 : \'5px\')}"><div ng-repeat="indicator in categ.indicators" ng-init="indicatorIndex = $index" style="display: flex; flex-direction: row"><div style="display: flex; flex: 1; align-items: center; justify-content: center; background-color: white; margin: 5px" ng-style="{\'margin-top\': (indicatorIndex === 0 ? 0 : \'5px\'), \'margin-bottom\': (indicatorIndex === categ.indicators.length-1 ? 0 : \'5px\')}"><a ng-click="showIndicatorDetails(indicator.id)" style="cursor: pointer" uib-tooltip="click me">{{indicator.id}}</a></div><div style="flex: 9; margin: 5px" ng-style="{\'margin-top\': (indicatorIndex === 0 ? 0 : \'5px\'), \'margin-bottom\': (indicatorIndex === categ.indicators.length-1 ? 0 : \'5px\')}"><div ng-repeat="score in indicator.scores" style="display: flex; flex-direction: row; border: solid thin"><div style="padding: 5px; display: flex; flex: 1; align-items: center; justify-content: center; background-color: white">{{score.no}}</div><div class="text-left" style="padding: 5px; display: flex; flex: 8; align-items: center; background-color: white">{{score.description}}</div></div></div></div></div></div></div></div></div>'),a.put("modules/main/modules/view-details/view.html",'<div class="modal-header"><span class="close" ng-click="cancel()">&times;</span><h3 class="modal-title">Module Details</h3></div><div class="modal-body"><div ng-if="status.errorMessage" class="alert alert-danger" role="alert">{{status.errorMessage}}</div><div ng-if="status.processing" class="spinner"></div><div style="margin: 10px"><table class="table table-condensed" style="margin-left: 10px; margin-right: 10px"><tbody><tr ng-repeat="field in fields"><td style="text-align: right; border: none"><strong>{{field|capitalize}}:</strong></td><td ng-if="field === \'id\'" style="border: none">{{moduleDoc.ldcDbData.id}}</td><td ng-if="field === \'title\'" style="border: none">{{moduleDoc.ldcDbData.name}}</td><td ng-if="field === \'description\'" style="border: none">{{moduleDoc.ldcDbData.description}}</td></tr></tbody></table></div><div ng-if="moduleDoc && moduleDoc.$resolved" class="row" style="margin: 20px 10px"><div class="col-xs-6" style="padding: 0 5px 0 0"><a class="btn btn-block btn-info" href="https://coretools.ldc.org/mods/{{moduleDoc.ldcDbData.uuid}}" target="_blank">Open Module in New Tab</a></div><div class="col-xs-6" style="padding: 0 0 5px 0"><button ng-click="getScores()" class="btn btn-block btn-success">Run Score Prediction</button></div></div><table class="table text-center" style="margin-top: 20px"><thead><th ng-repeat="header in scoreFields" class="text-center" style="vertical-align: middle"><strong>{{header|capitalize}}</strong></th></thead><tbody><tr ng-repeat="indicator in indicators" ng-init="i=$index" ng-style="{\'border-top-style\': (!indicators[i-1] || indicators[i-1].slice(0,3) !== indicator.slice(0,3)) ? \'solid\' : \'\'}"><td ng-repeat="field in scoreFields" style="vertical-align: middle"><div ng-if="field === \'indicator\'">{{indicator}}</div><div ng-if="field === \'manual score\'">{{moduleDoc.manualScores[indicator] || \'-\'}}</div><div ng-if="field === \'predicted score\'"><div ng-if="status[\'processing-\'+indicator]" class="spinner-sm" style="margin: auto"></div><div ng-if="!status[\'processing-\'+indicator]">{{moduleDoc.predictedScores[indicator] || \'-\'}}</div></div></td></tr></tbody></table></div>'),a.put("modules/main/modules/view.html",'<h1 class="text-center" style="color: white; margin-top: 35px">Modules</h1><div ng-if="successMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in successMessages" class="alert alert-success" style="margin: 10px 0 0"><span ng-click="closeSuccessMessage($index)" class="close">&times</span> {{message}}</div></div><div ng-if="errorMessages.length" class="container" style="max-width: 600px"><div ng-repeat="message in errorMessages" class="alert alert-danger" style="margin: 10px 0 0"><span ng-click="closeErrorMessage($index)" class="close">&times</span> {{message}}</div></div><div class="container text-center" style="margin-top: 20px"><div class="btn-group"><button ng-model="params.filterBy" class="btn btn-filter" uib-btn-radio="\'manual scores\'">Manual Scores <span class="badge" ng-if="summary.manualScores" ng-bind="summary.manualScores|roughNumber"></span></button> <button ng-model="params.filterBy" class="btn btn-filter" uib-btn-radio="\'predicted scores\'">Predicted Scores <span class="badge" ng-if="summary.predictedScores" ng-bind="summary.predictedScores|roughNumber"></span></button> <button ng-model="params.filterBy" class="btn btn-filter" uib-btn-radio="\'no scores\'">No Scores <span class="badge" ng-if="summary.noScores" ng-bind="summary.noScores|roughNumber"></span></button></div><div ng-if="status.processingSummary" class="btn-group"><div class="spinner" style="height: 10px; width: 10px; margin: auto"></div></div><div ng-show="status.errorMessageSummary" class="alert alert-danger" style="margin: 10px 10% 0; width: 80%" role="alert">{{status.errorMessageSummary}}</div></div><div class="container" style="margin-top: 15px; max-width: 800px"><table ng-if="modules.$resolved" class="table table-bordered table-hover" style="background-color: white"><thead><th ng-repeat="field in fields" class="hidden-xs" style="vertical-align: middle" ng-style="{\'text-align\': (field === \'title\' ? \'left\': \'center\')}">{{field|capitalize}}</th><th class="visible-xs"><span class="text-info">Text</span><br>Something</th></thead><tbody><tr ng-repeat="module in modules" ng-init="moduleIndex = $index+1" ng-class="{\'last-row\': $last}"><td ng-repeat="field in fields" class="hidden-xs"><div ng-if="field === \'no\'" style="text-align: right">{{moduleIndex}}</div><div ng-if="field === \'id\'" style="text-align: center">{{module.ldcDbData.id}}</div><div ng-if="field === \'title\'"><a href="https://coretools.ldc.org/mods/{{module.ldcDbData.uuid}}" target="_blank" uib-tooltip="open module in new tab">{{module.ldcDbData.name}}</a></div><div ng-if="field === \'manual scores\'" style="text-align: center"><i class="glyphicon glyphicon-ok" ng-if="module.hasOwnProperty(\'manualScores\')"></i></div><div ng-if="field === \'predicted scores\'" style="text-align: center"><i class="glyphicon glyphicon-ok" ng-if="module.hasOwnProperty(\'predictedScores\')"></i></div><div ng-if="field === \'view details\'" ng-click="viewDetails(module._id)" style="text-align: center; cursor: pointer"><i class="glyphicon glyphicon-info-sign"></i></div></td><td class="visible-xs">something</td></tr></tbody></table><div ng-if="status.errorMessage" class="alert alert-danger" role="alert">{{status.errorMessage}}</div><div ng-if="status.processing" class="spinner"></div></div>'),a.put("modules/main/user/views/admin-sign-up.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px; margin-bottom: 20px"><h2 class="text-center" style="color: whitesmoke">Admin Sign Up</h2></div><div ng-if="status.errorMessage" class="alert alert-danger" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeErrorMessage()" class="close">&times</span> <span ng-if="[\'!newEmail\'].indexOf(status.errorMessage) < 0">{{status.errorMessage}}</span> <span ng-if="status.errorMessage === \'!newEmail\'">You already have an account. Please <a ui-sref="user.login" style="cursor: pointer">login</a>.</span></div><div style="padding: 0 1px"><div style="max-width: 500px; margin: auto; padding: 15px; border: 1px solid; border-radius: 5px; background-color: lightblue"><form ng-submit="click() && form.$valid && signUp(\'admin\')" ng-if="!status.processing" name="form" novalidate><div class="form-group"><label>name</label><div class="col-xs-12" style="padding: 0; margin-bottom: 15px"><div class="col-sm-6 col-xs-12" style="padding: 1px"><input type="text" name="firstName" class="form-control" ng-model="user.firstName" placeholder="first name" required autofocus></div><div class="col-sm-6 col-xs-12" style="padding: 1px"><input type="text" name="lastName" class="form-control" ng-model="user.lastName" placeholder="last name" required></div></div></div><div class="form-group"><label>email</label><div style="padding: 1px"><input type="email" name="email" ng-model="user.email" class="form-control" placeholder="email address" ng-pattern="emailRegex" required></div></div><div class="form-group has-feedback"><label>password</label><div style="padding: 1px"><input ng-if="!status.showPassword" type="password" name="password" ng-model="user.password" class="form-control" placeholder="password" ng-pattern="passwordRegex" required> <input ng-if="status.showPassword" type="text" name="password" ng-model="user.password" class="form-control" placeholder="password" ng-pattern="passwordRegex" required></div><span ng-if="user.password" ng-click="toggleShowPassword()" class="glyphicon form-control-feedback" ng-class="{\'glyphicon-eye-open\': !status.showPassword, \'glyphicon-eye-close\': status.showPassword}" style="color: darkgray; cursor: pointer; pointer-events: all" uib-tooltip="{{status.showPassword ? \'hide\' : \'show\'}}"></span></div><p style="margin: 30px 0 0 0; text-align: center; font-weight: bold">You are signing up as an administrator.</p><button type="submit" class="btn btn-block btn-default" ng-class="{\'btn-success\': (!form.$dirty && !status.clicked) || form.$valid}" style="width: 50%; margin: auto; margin-top: 30px">Sign Up!</button><div ng-if="status.clicked && !form.$valid" class="help-block text-center small" style="color: red; margin-top: 10px"><p ng-if="!form.firstName.$valid">* first name is required *</p><p ng-if="!form.lastName.$valid">* last name is required *</p><p ng-if="!form.email.$valid">* please provide a valid email address *</p><p ng-if="!form.password.$valid">* your password must be at least 6 characters *</p></div></form><span ng-if="status.processing" class="spinner"></span></div></div>'),a.put("modules/main/user/views/forgot-password.html",'<h2 class="text-center" style="margin-bottom: 15px">Forgot Your Password</h2><div ng-if="status.successMessage" class="alert alert-success" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeSuccessMessage()" class="close">&times</span> {{status.successMessage}}</div><div ng-if="status.errorMessage" class="alert alert-danger" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeErrorMessage()" class="close">&times</span> {{status.errorMessage}}</div><div style="padding: 0 1px"><div style="max-width: 500px; margin: auto; padding: 15px; border: 1px solid; border-radius: 5px; background-color: lightblue"><form ng-submit="click() && form.$valid && sendPasswordResetLink()" ng-if="!status.processing" name="form" novalidate><div class="form-group"><label>email</label><div style="padding: 1px"><input type="email" name="email" ng-model="user.email" class="form-control" placeholder="email address" ng-pattern="emailRegex" required autofocus></div></div><button type="submit" class="btn btn-block btn-default" ng-class="{\'btn-success\': (!form.$dirty && !status.clicked) || form.$valid}" style="width: 50%; margin: 30px auto 15px">Send Me A Password Reset Link</button><div ng-if="status.clicked && !form.$valid" class="help-block text-center small" style="color: red; margin-top: 10px"><p ng-if="!form.email.$valid">* please provide a valid email address *</p></div></form><span ng-if="status.processing" class="spinner"></span></div></div>'),
a.put("modules/main/user/views/login.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px; margin-bottom: 40px"><h2 class="text-center" style="color: whitesmoke">Login</h2></div><div ng-if="status.errorMessage" class="alert alert-danger" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeErrorMessage()" class="close">&times</span> <span ng-if="status.errorMessage === \'!user\'">We did not recognize your email address. Please try again or <a ng-click="goToSignUp()" style="cursor: pointer">sign up</a> .</span> <span ng-if="status.errorMessage === \'!validPassword\'">Your password is incorrect. Please try again or click <a ng-click="goToForgotPassword()" style="cursor: pointer">forgot password</a> .</span> <span ng-if="[\'!user\', \'!validPassword\'].indexOf(status.errorMessage) < 0">{{status.errorMessage}}</span></div><div style="padding: 0 1px"><div style="max-width: 500px; margin: auto; padding: 15px; border: 1px solid; border-radius: 5px; background-color: lightblue"><form ng-submit="click() && form.$valid && login()" ng-if="!status.processing" name="form" novalidate><div class="form-group"><label>email</label><div style="padding: 1px"><input type="email" name="email" ng-model="user.email" class="form-control" placeholder="email address" ng-pattern="emailRegex" required autofocus></div></div><div class="form-group has-feedback"><label>password</label><div style="padding: 1px"><input ng-if="!status.showPassword" type="password" name="password" ng-model="user.password" class="form-control" placeholder="password" ng-pattern="passwordRegex" required> <input ng-if="status.showPassword" type="text" name="password" ng-model="user.password" class="form-control" placeholder="password" ng-pattern="passwordRegex" required></div><span ng-if="user.password" ng-click="toggleShowPassword()" class="glyphicon form-control-feedback" ng-class="{\'glyphicon-eye-open\': !status.showPassword, \'glyphicon-eye-close\': status.showPassword}" style="color: darkgray; cursor: pointer; pointer-events: all" uib-tooltip="{{status.showPassword ? \'hide\' : \'show\'}}"></span></div><button type="submit" class="btn btn-block btn-default" ng-class="{\'btn-success\': (!form.$dirty && !status.clicked) || form.$valid}" style="width: 50%; margin: 30px auto 15px">Login</button><div class="text-center"><a ng-click="goToForgotPassword()" style="cursor: pointer">Forgot your Password?</a></div><div ng-if="status.clicked && !form.$valid" class="help-block text-center small" style="color: red; margin-top: 10px"><p ng-if="!form.email.$valid">* please provide a valid email address *</p><p ng-if="!form.password.$valid">* your password must be at least 6 characters *</p></div></form><span ng-if="status.processing" class="spinner"></span></div></div>'),a.put("modules/main/user/views/reset-password.html",'<h2 class="text-center" style="margin-bottom: 15px">Reset Your Password</h2><div ng-if="status.successMessage" class="alert alert-success" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeSuccessMessage()" class="close">&times</span> <span ng-if="status.successMessage === \'login\'">Your password has been reset. Please <a ng-click="goToLogin()" style="cursor: pointer">login</a> .</span> <span ng-if="[\'login\'].indexOf(status.successMessage) < 0">{{status.successMessage}}</span></div><div ng-if="status.errorMessage" class="alert alert-danger" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeErrorMessage()" class="close">&times</span> <span ng-if="status.errorMessage === \'!user\'">We didn\'t recognize your email address. Please try again.</span> <span ng-if="status.errorMessage === \'!validReset\'">Your reset link is no longer valid. Go to <a ng-click="goToForgotPassword()" style="cursor: pointer">forgot your password</a> and request a new link.</span> <span ng-if="[\'!user\', \'!validReset\'].indexOf(status.errorMessage) < 0">{{status.errorMessage}}</span></div><div style="padding: 0 1px"><div style="max-width: 500px; margin: auto; padding: 15px; border: 1px solid; border-radius: 5px; background-color: lightblue"><form ng-submit="click() && form.$valid && resetPassword()" ng-if="!status.processing" name="form" novalidate><div class="form-group"><label>email</label><div style="padding: 1px"><input type="email" name="email" ng-model="user.email" class="form-control" style="cursor: not-allowed" placeholder="email address" ng-pattern="emailRegex" readonly="readonly" required></div></div><div class="form-group has-feedback"><label>new password</label><div style="padding: 1px"><input ng-if="!status.showPassword" type="password" name="password" ng-model="user.password" class="form-control" placeholder="your new password" ng-pattern="passwordRegex" required autofocus> <input ng-if="status.showPassword" type="text" name="password" ng-model="user.password" class="form-control" placeholder="your new password" ng-pattern="passwordRegex" required autofocus></div><span ng-if="user.password" ng-click="toggleShowPassword()" class="glyphicon form-control-feedback" ng-class="{\'glyphicon-eye-open\': !status.showPassword, \'glyphicon-eye-close\': status.showPassword}" style="color: darkgray; cursor: pointer; pointer-events: all" uib-tooltip="{{status.showPassword ? \'hide\' : \'show\'}}"></span></div><button type="submit" class="btn btn-block btn-default" ng-class="{\'btn-success\': (!form.$dirty && !status.clicked) || form.$valid}" style="width: 50%; margin: 30px auto 15px">Reset Password</button><div ng-if="status.clicked && !form.$valid" class="help-block text-center small" style="color: red; margin-top: 10px"><p ng-if="!form.email.$valid">* please provide a valid email address *</p><p ng-if="!form.password.$valid">* your password must be at least 6 characters *</p></div></form><span ng-if="status.processing" class="spinner"></span></div></div>'),a.put("modules/main/user/views/settings.html",'<h2 class="text-center" style="margin-bottom: 15px">Settings</h2><div ng-if="status.successMessage" class="alert alert-success" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeSuccessMessage()" class="close">&times</span> {{status.successMessage}}</div><div ng-if="status.errorMessage" class="alert alert-danger" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeErrorMessage()" class="close">&times</span> {{status.errorMessage}}</div><div style="padding: 0 1px"><div style="max-width: 500px; margin: auto; padding: 15px; border: 1px solid; border-radius: 5px; background-color: lightblue"><form ng-submit="click() && form.$valid && updateSettings()" ng-if="!status.processing" name="form" novalidate><div class="form-group"><label>first name</label><div style="padding: 1px"><input ng-if="status.editFirstName" type="text" name="firstName" ng-model="fullUser.firstName" class="form-control" placeholder="first name" required><div ng-if="!status.editFirstName" class="form-inline"><input type="text" name="firstName" ng-model="fullUser.firstName" class="form-control" style="width: 90%" placeholder="first name" disabled="disabled"> <button ng-click="status.editFirstName = true;" class="btn btn-default" style="max-width: 10%"><i class="glyphicon glyphicon-pencil"></i></button></div></div></div><div class="form-group"><label>last name</label><div style="padding: 1px"><input ng-if="status.editLastName" type="text" name="lastName" ng-model="fullUser.lastName" class="form-control" placeholder="last name" required><div ng-if="!status.editLastName" class="form-inline"><input type="text" name="lastName" ng-model="fullUser.lastName" class="form-control" style="width: 90%" placeholder="last name" disabled="disabled"> <button ng-click="status.editLastName = true;" class="btn btn-default" style="max-width: 10%"><i class="glyphicon glyphicon-pencil"></i></button></div></div></div><div class="form-group"><label>email</label><div style="padding: 1px"><input ng-if="status.editEmail" type="email" name="email" ng-model="fullUser.email" class="form-control" placeholder="email address" ng-pattern="emailRegex" required><div ng-if="!status.editEmail" class="form-inline"><input type="email" name="email" ng-model="fullUser.email" class="form-control" style="width: 90%" placeholder="email address" ng-pattern="emailRegex" disabled="disabled"> <button ng-click="status.editEmail = true;" class="btn btn-default" style="max-width: 10%"><i class="glyphicon glyphicon-pencil"></i></button></div></div></div><div ng-if="!status.editPassword" class="form-group"><div class="form-inline"><label>password</label><div style="padding: 1px"><input type="password" name="fakepassword" class="form-control" style="width: 90%" value="123456" disabled="disabled"> <button ng-click="status.editPassword = true;" class="btn btn-default" style="max-width: 10%"><i class="glyphicon glyphicon-pencil"></i></button></div></div></div><div ng-if="status.editPassword"><div class="form-group has-feedback"><label>current password</label><div style="padding: 1px"><input ng-if="!status.showPassword" type="password" name="currentPassword" ng-model="fullUser.password" class="form-control" placeholder="password"> <input ng-if="status.showPassword" type="text" name="password" ng-model="fullUser.password" class="form-control" placeholder="password"></div><span ng-if="fullUser.password" ng-click="toggleShowPassword()" class="glyphicon form-control-feedback" ng-class="{\'glyphicon-eye-open\': !status.showPassword, \'glyphicon-eye-close\': status.showPassword}" style="color: darkgray; cursor: pointer; pointer-events: all" uib-tooltip="{{status.showPassword ? \'hide\' : \'show\'}}"></span></div><div class="form-group has-feedback"><label>new password</label><div style="padding: 1px"><input ng-if="!status.showPassword" type="password" name="newPassword" ng-model="fullUser.newPassword" class="form-control" placeholder="password"> <input ng-if="status.showPassword" type="text" name="password" ng-model="fullUser.newPassword" class="form-control" placeholder="password"></div><span ng-if="fullUser.password" ng-click="toggleShowPassword()" class="glyphicon form-control-feedback" ng-class="{\'glyphicon-eye-open\': !status.showPassword, \'glyphicon-eye-close\': status.showPassword}" style="color: darkgray; cursor: pointer; pointer-events: all" uib-tooltip="{{status.showPassword ? \'hide\' : \'show\'}}"></span></div></div><div ng-if="fullUser.group" class="form-group"><label>group</label><div ng-if="!status.editGroup && groups && groups.$resolved" class="form-inline"><select ng-model="fullUser.group._id" class="form-control" style="width: 90%" name="group" disabled="disabled"><option ng-repeat="group in groups | orderBy:name" value="{{group._id}}">{{group.name}}</option></select><button ng-click="status.editGroup = true;" class="btn btn-default" style="max-width: 10%"><i class="glyphicon glyphicon-pencil"></i></button></div><div ng-if="status.editGroup && groups && groups.$resolved" style="display: flex; flex-direction: column"><div ng-repeat="group in groups | orderBy: \'name\'" ng-click="selectNewGroup(group)" class="btn btn-default" style="flex: 1" ng-style="{\'border\': (group._id.toString() === fullUser.group._id.toString()) ? \'solid\' : \'\'}"><div style="display: flex; flex-direction: row; align-items: center"><div style="flex: 1; font-weight: bold">{{group.name}}</div><div style="flex: 3; text-align: left; font-size: 90%; white-space: normal"><ul style="margin: 10px 0"><li><strong>Subject:</strong> {{group.subject}}</li><li><strong>Facilitator:</strong> {{group.facilitator}}</li><li><strong>Modules:</strong> <span ng-repeat="module in group.modules">{{module.name}}{{(group.modules[$index+1]) ? \', \' : \'\'}}</span></li></ul></div></div></div></div></div><div ng-if="!user.admin" class="form-group"><label>role</label><div style="padding: 1px"><select ng-if="status.editRole" ng-model="fullUser.facilitator" ng-options="option.value as option.text for option in [{value: false, text: \'grader\'}, {value: true, text: \'facilitator\'}]" class="form-control" name="role" required></select><div ng-if="!status.editRole" class="form-inline"><select ng-model="fullUser.facilitator" ng-options="option.value as option.text for option in [{value: false, text: \'grader\'}, {value: true, text: \'facilitator\'}]" class="form-control" style="width: 90%" name="role" disabled="disabled"></select><button ng-click="status.editRole = true;" class="btn btn-default" style="max-width: 10%"><i class="glyphicon glyphicon-pencil"></i></button></div></div></div><button type="submit" class="btn btn-block btn-default" ng-class="{\'btn-success\': (!form.$dirty && !status.clicked) || form.$valid}" style="width: 50%; margin: 30px auto 15px">Save</button><div ng-if="status.clicked && !form.$valid" class="help-block text-center small" style="color: red; margin-top: 10px"><p ng-if="!form.email.$valid">* please provide a valid email address *</p><p ng-if="!form.newPassword.$valid">* passwords must be at least 6 characters *</p></div></form><span ng-if="status.processing" class="spinner"></span></div></div>'),a.put("modules/main/user/views/sign-up.html",'<div class="jumbotron" style="background: #677F71; padding-top: 12px; padding-bottom: 18px; margin-bottom: 20px"><h2 class="text-center" style="color: whitesmoke">Sign Up</h2></div><div ng-if="window.location.host.indexOf(\'localhost\') > -1" class="text-center" style="margin-bottom: 20px"><button ui-sref="user.adminsignup" class="btn btn-info">Admin Sign Up</button></div><div ng-if="status.errorMessage" class="alert alert-danger" style="max-width: 500px; margin: auto; margin-bottom: 10px"><span ng-click="closeErrorMessage()" class="close">&times</span> <span ng-if="[\'!newEmail\'].indexOf(status.errorMessage) < 0">{{status.errorMessage}}</span> <span ng-if="status.errorMessage === \'!newEmail\'">You already have an account. Please <a ui-sref="user.login" style="cursor: pointer">login</a>.</span></div><div style="padding: 0 1px"><div style="max-width: 500px; margin: auto; padding: 15px; border: 1px solid; border-radius: 5px; background-color: lightblue"><form ng-submit="click() && form.$valid && signUp()" ng-if="!status.processing" name="form" novalidate><div class="form-group"><label>name</label><div class="col-xs-12" style="padding: 0; margin-bottom: 15px"><div class="col-sm-6 col-xs-12" style="padding: 1px"><input type="text" name="firstName" class="form-control" ng-model="user.firstName" placeholder="first name" required autofocus></div><div class="col-sm-6 col-xs-12" style="padding: 1px"><input type="text" name="lastName" class="form-control" ng-model="user.lastName" placeholder="last name" required></div></div></div><div class="form-group"><label>email</label><div style="padding: 1px"><input type="email" name="email" ng-model="user.email" class="form-control" placeholder="email address" ng-pattern="emailRegex" required></div></div><div class="form-group has-feedback"><label>password</label><div style="padding: 1px"><input ng-if="!status.showPassword" type="password" name="password" ng-model="user.password" class="form-control" placeholder="password" ng-pattern="passwordRegex" required> <input ng-if="status.showPassword" type="text" name="password" ng-model="user.password" class="form-control" placeholder="password" ng-pattern="passwordRegex" required></div><span ng-if="user.password" ng-click="toggleShowPassword()" class="glyphicon form-control-feedback" ng-class="{\'glyphicon-eye-open\': !status.showPassword, \'glyphicon-eye-close\': status.showPassword}" style="color: darkgray; cursor: pointer; pointer-events: all" uib-tooltip="{{status.showPassword ? \'hide\' : \'show\'}}"></span></div><div class="form-group" style="margin-bottom: 0"><label>group</label><button ng-if="!status.showGroups" ng-click="status.showGroups = true" class="btn btn-block btn-default"><div class="text-left" style="width: 100%"><span ng-style="{color: user.group ? \'\' : \'#999\'}">{{user.group.name ? user.group.name : \'select a group\'}}</span></div></button></div><div ng-if="status.showGroups && groups && groups.$resolved" style="display: flex; flex-direction: column"><div ng-repeat="group in groups | orderBy: \'name\'" ng-click="selectGroup(group)" class="btn btn-default" style="flex: 1"><div style="display: flex; flex-direction: row; align-items: center"><div style="flex: 1; font-weight: bold">{{group.name}}</div><div style="flex: 3; text-align: left; font-size: 90%; white-space: normal"><ul style="margin: 10px 0"><li><strong>Subject:</strong> {{group.subject}}</li><li><strong>Facilitator:</strong> {{group.facilitator}}</li><li><strong>Modules:</strong> <span ng-repeat="module in group.modules">{{module.name}}{{(group.modules[$index+1]) ? \', \' : \'\'}}</span></li></ul></div></div></div></div><div class="form-group" style="margin-top: 15px"><label>role</label><select ng-model="user.facilitator" class="form-control" name="role" required><option value="false">grader</option><option value="true">facilitator</option></select></div><button type="submit" class="btn btn-block btn-default" ng-class="{\'btn-success\': (!form.$dirty && !status.clicked) || form.$valid}" style="width: 50%; margin: auto; margin-top: 30px">Sign Up!</button><div ng-if="status.clicked && !form.$valid" class="help-block text-center small" style="color: red; margin-top: 10px"><p ng-if="!form.firstName.$valid">* first name is required *</p><p ng-if="!form.lastName.$valid">* last name is required *</p><p ng-if="!form.email.$valid">* please provide a valid email address *</p><p ng-if="!form.password.$valid">* your password must be at least 6 characters *</p><p ng-if="!form.group.$valid">* please select a group *</p><p ng-if="!form.role.$valid">* please select a role *</p></div></form><span ng-if="status.processing" class="spinner"></span></div></div>'),a.put("modules/main/welcome/view.html",'<div class="jumbotron text-center" style="margin-bottom: 0; background-color: darkseagreen"><h1>Welcome</h1></div><div class="jumbotron img-responsive fixed-size-full-height" style="min-height: 600px; margin-bottom: 0; background-size: cover; background-image: url(https://s3-us-west-2.amazonaws.com/pg-scoresheet/girl-writing-pencil_800.jpg)"><div class="col-sm-1"></div><div class="col-sm-5"><h2>Thanks for grading!</h2><br><p style="margin-left: 15px">To get started...</p><ol><li style="margin-bottom: 15px">Go to the <button ui-sref="essays" class="btn btn-sm btn-default" style="margin: 0 5px"><i class="glyphicon glyphicon-file"></i> Essays</button> page.</li><li style="margin-bottom: 15px">Click the <button ui-sref="grade" class="btn btn-sm btn-success" style="margin: 0 5px">Start Grading</button> button.</li></ol></div></div>'),a.put("modules/parts/navbar/view.html",'<nav class="navbar navbar-default" style="margin-bottom: 0; border-radius: 0"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" ng-click="toggleNavbar()"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href ui-sref="home">Alignment <span ng-if="window.location.host.indexOf(\'localhost\') > -1" style="font-weight: bold; color: cornflowerblue">localhost</span> <span ng-if="window.location.host.indexOf(\'demo\') > -1" style="font-weight: bold; color: orange">demo</span></a></div><div class="collapse navbar-collapse" id="navbar-collapse"><ul class="nav navbar-nav"><li ui-sref-active="active"><a href ui-sref="indicators"><i class="glyphicon glyphicon-equalizer"></i> Indicators</a></li><li ui-sref-active="active"><a href ui-sref="mods"><i class="glyphicon glyphicon-blackboard"></i> Modules</a></li><li ui-sref-active="active"><a href ui-sref="download"><i class="glyphicon glyphicon-cloud-download"></i> Download</a></li><li ng-if="window.location.host.indexOf(\'localhost\') > -1 || user.name === \'Derek Soike\'" ui-sref-active="active"><a href ui-sref="admin"><i class="glyphicon glyphicon-dashboard"></i> Admin</a></li></ul><ul ng-if="true === false" class="nav navbar-nav navbar-right"><li class="dropdown" uib-dropdown ng-if="user._id"><a href="#" class="dropdown-toggle" uib-dropdown-toggle uib-tooltip="{{user.admin ? \'Administrator\' : (user.facilitator ? \'Facilitator\' : \'\')}}" tooltip-placement="left">{{user.name}} <span class="caret"></span></a><ul class="dropdown-menu" uib-dropdown-menu role="menu"><li><a href ui-sref="user.settings">Settings</a></li><li role="separator" class="divider"></li><li><a href="#" ng-click="logout($event)">Logout</a></li></ul></li><li ui-sref-active="active" ng-if="!user._id"><a href ui-sref="user.signup">Sign Up</a></li><li ui-sref-active="active" ng-if="!user._id"><a href ui-sref="user.login">Login</a></li></ul></div></div></nav>')}]);